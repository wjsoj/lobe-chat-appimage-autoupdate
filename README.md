# 自动化AUR包更新

## 工作原理

这个项目会自动监控LobeChat的新release并更新AUR包，无需复杂配置。

### 自动化流程

1. **定时检查**：每15分钟检查一次LobeChat是否有新release
2. **智能查找**：查找有构建产物（AppImage）的最新版本，而不是等待构建
3. **自动更新**：下载文件，更新PKGBUILD，推送到AUR

### 特点

- ✅ **零配置**：无需设置webhook或额外token
- ✅ **快速响应**：15分钟内检测到新版本
- ✅ **智能回退**：如果最新版本没有构建产物，自动使用最近的可用版本
- ✅ **无等待超时**：不等待构建完成，直接使用已有的构建产物
- ✅ **手动触发**：支持在Actions页面手动运行

### 工作逻辑

当检测到新release时，workflow会：

1. **检查最新版本**：获取最新的release tag
2. **向下查找**：如果最新版本没有AppImage，向下查找直到找到有AppImage的版本
3. **版本比较**：将找到的版本与当前PKGBUILD中的版本比较
4. **执行更新**：如果版本不同，执行更新流程

### 时间线示例

```
14:00 - 上游发布新release v1.0.5（构建中）
14:15 - 检测到v1.0.5但没有AppImage，向下查找
14:15 - 找到v1.0.4有AppImage，检查是否需要更新
14:16 - 如果当前版本是v1.0.3，开始更新到v1.0.4
14:18 - AUR包更新完成

Later:
15:00 - v1.0.5的AppImage构建完成
15:15 - 检测到v1.0.5有AppImage，开始更新
15:17 - AUR包更新到v1.0.5
```

### 手动触发

如果需要立即检查更新：
1. 访问项目的Actions页面
2. 选择"Update AUR Package" workflow
3. 点击"Run workflow"
4. 可选择"强制更新"来忽略版本检查
